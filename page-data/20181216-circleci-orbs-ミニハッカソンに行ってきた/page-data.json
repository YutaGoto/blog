{"componentChunkName":"component---src-templates-blog-post-js","path":"/20181216-circleci-orbs-ミニハッカソンに行ってきた/","result":{"data":{"site":{"siteMetadata":{"title":".ごっちの日記","siteUrl":"https://yutagoto.github.io"}},"markdownRemark":{"id":"62f3d5dd-2abb-5d10-8fe8-bfb4b32b29a6","excerpt":"こんにちは、 .ごっちです。 circlecijp\nCircleCI Orbs ミニハッカソン (2018/12/15 10:00〜) _Orbs のリリースを記念して CircleCI としては初となる(ミニ)ハッカソンを開催します！ 今回はスタディサプリの開発で有名な Quipper…","html":"<p>こんにちは、 .ごっちです。 circlecijp\n<a href=\"https://circleci.connpass.com/event/109136/\"><strong>CircleCI Orbs ミニハッカソン (2018/12/15 10:00〜)</strong> _Orbs のリリースを記念して CircleCI としては初となる(ミニ)ハッカソンを開催します！ 今回はスタディサプリの開発で有名な Quipper 様に作業スペースを提供していただけることになりました。 # 開催概要 _ 開催日: 2018 年…*circleci.connpass.com</a></p>\n<p>2018/12/15 に参加してきました。</p>\n<h2>CircleCI 2.1 のおさらい</h2>\n<p>2.0 までの設定はさらっとやったことあるんですけども、2.1 はやろうやろうと思っていたけどやれていなかったので、ちょうどいい機会だなと。</p>\n<p>なにができるようになったかというと、オレオレのステップを定義できるようになったんですよね。\n<a href=\"https://sue445.hatenablog.com/entry/2018/09/30/110222\"><strong>CircleCI 2.1 preview の commands が便利だった - くりにっき</strong> *https://github.com/CircleCI-Public/config-preview-sdk を見てたら commands が便利そうだったのでためしに個人プロダクトに入れてみた。 Advanced…*sue445.hatenablog.com</a></p>\n<p>冗長な部分はざっと自分で定義できますよと。たとえば複数の Workflows があったときに同じコードを書くのは変更があったらその分だけ書き直さなければいけなかったのが、コマンド一つでまとめられるというやつです。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">version: 2.1\ncommands:\n  run-rails-test:\n    description: Railsのテスト\n    steps:\n      - run:\n          command: |\n            bundle exec rails db:create\n            bundle exec rails db:schema:load\n      - run: bundle exec rspec</code></pre></div>\n<p>プロジェクトがひとつだった場合は Rails のテストは一つでいいんですが、ほかにも Rails プロジェクトがある場合、結局同じコードを書いてしまうというお話なのです。</p>\n<p>そこでいろんなプロジェクトから CI の設定を配布したり読み込んだりすることができるのが Orbs(らしい)です。\n<a href=\"https://www.kaizenprogrammer.com/entry/2018/12/01/111145\"><strong>CircleCI Orbs 入門 - 生産性向上ブログ</strong> *この記事は、 CircleCI Advent Calendar 2018 初日の記事です。記事公開時点ではまだ空いてる日程があるので、CircleCI に関するネタならなんでも気軽に参加してください！ 長いので目次。 Orbs は、最近…*www.kaizenprogrammer.com</a></p>\n<p>ざっくり Orbs の作り方は</p>\n<ul>\n<li>\n<p>Docker をインストールする</p>\n</li>\n<li>\n<p><a href=\"https://circleci.com/docs/2.0/local-cli/\">Circle CLI</a>をインストールする</p>\n</li>\n<li>\n<p>NameSpace を決める</p>\n</li>\n<li>\n<p>Orbs を CircleCI にプッシュする</p>\n</li>\n<li>\n<p>確認する</p>\n</li>\n</ul>\n<p>感じです。ほかの人が書いたブログポストや公式ドキュメントのほうが詳しいです。</p>\n<h2>やったこと</h2>\n<p>最初はなれるためにも hello world 的なものを作りました。</p>\n<p><a href=\"https://circleci.com/orbs/registry/orb/yutagoto/hello-world\">https://circleci.com/orbs/registry/orb/yutagoto/hello-world</a>\n<a href=\"https://github.com/YutaGoto/hello-orbs\"><strong>YutaGoto/hello-orbs</strong> *Contribute to YutaGoto/hello-orbs development by creating an account on GitHub.*github.com</a></p>\n<p>この hello world 的なものを公開してもいいのかどうかとか微妙なところではありますが、わりとカンタンに作成＆公開できるのがすばらしい点だと思います。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">version: 2.1\ndescription: hello orbs\n\ncommands:\n  hello:\n    description: greeting hello\n    parameters:\n      username:\n        type: string\n        description: a user name\n    steps:\n      - run:\n          name: hello world\n          command: \"echo 'hello orbs, &lt;&lt; parameters.username >>！'\"</code></pre></div>\n<p>これでみなさんもこのコマンドを使うことができます！使い所がまったくないですが。。</p>\n<p>次に Rails でよく使うのをつくろうかと思ったけど、Ruby ですばらしいものがすでにあるので、一旦放置。テストコマンドの共通化はこのブログを書いているときに思いつきました</p>\n<p>Wish List に名言 BOT があったので、それをつくろうかなと考えてました。\n<a href=\"https://github.com/YutaGoto/meigen-command\"><strong>YutaGoto/meigen-command</strong> *circleci orb. Contribute to YutaGoto/meigen-command development by creating an account on GitHub.*github.com</a></p>\n<p>この Orbs を読み込んで実行すれば名言が結果に表示されるようにするというやつです。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">version: 2.1\ndescription: 名言を表示してくれるものです\n\ncommands:\n  echo-meigen:\n    description: 名言を出力\n    steps:\n      - run:\n          name: 名言\n          command: |\n            echo 夢は逃げない、逃げるのはいつも自分だ。</code></pre></div>\n<p><img src=\"https://cdn-images-1.medium.com/max/2000/1*_8OfTtF4GPqBwCDBe1gi1Q.png\" alt=\"\"></p>\n<p>カンタンに echo コマンドで出力させればいいんですけど、これではいつも同じ名言が出力してしまって面白くありません。\n<a href=\"http://www.meigensyu.com/\"><strong><em>名言集.com - 名言・ことわざ・金言・格言集めました</em></strong> 名言集.com - 名言・ことわざ・金言・格言集めました www.meigensyu.com</a></p>\n<p>これをうまいこと活用したいところではありましたが、json 形式で返してくれるようなものがないので、おしいところでした。 <a href=\"http://www.meigensyu.com/quatations/view/random\">http://www.meigensyu.com/quatations/view/random</a> にアクセスしての HTML を解析して。。。。。みたいなことを shell でやれればいいんですが、そこまでの技量はぼくに備わっていなかった。。</p>\n<p>もうちょいといったところで時間切れです。</p>\n<p>ハッカソン後は簡単に成果発表をしました。次の予定の都合上、自分のぶんだけ発表してさりました。ちょっと惜しかった。。</p>\n<h2>感想</h2>\n<p>2.1 や Orbs をさわるいいきっかけになってよかったと思っております。布教したり、自分のプロジェクトに取り入れていきたいやつでした！</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/2496/1*Ic-445wJFOFnY4mtMeB9NA.jpeg\" alt=\"\"></p>\n<p>いまは完全に理解したフェーズにあるけれども、もうちょっとするとまた全然わからないフェーズに突入するので、さっさとﾁｮｯﾄﾃﾞｷﾙ状態に持っていきたいです。</p>\n<iframe src=\"https://medium.com/media/e53373a2efe5cf18c272fd05c1f017ec\" frameborder=0></iframe>\n<p>あと、🍣 うまかったです</p>\n<p>当日盛り上がっていた Twitter のまとめはここから。\n<a href=\"https://togetter.com/li/1298568\"><strong>CircleCI Orbs ハッカソン</strong> <em>12/15 に CircleCI 初のハッカソンを行ったときのまとめ</em>togetter.com</a></p>\n<p>また時間をとっていじいじしたいところでした。まる。</p>\n<h2>References</h2>\n<ul>\n<li>\n<p>CircleCI Orbs ミニハッカソン — connpass, <a href=\"https://circleci.connpass.com/event/109136/\">https://circleci.connpass.com/event/109136/</a></p>\n</li>\n<li>\n<p>Using the CircleCI Local CLI — CircleCI, <a href=\"https://circleci.com/docs/2.0/local-cli/\">https://circleci.com/docs/2.0/local-cli/</a></p>\n</li>\n<li>\n<p>CircleCI 2.1 preview の commands が便利だった — くりにっき, <a href=\"https://sue445.hatenablog.com/entry/2018/09/30/110222\">https://sue445.hatenablog.com/entry/2018/09/30/110222</a></p>\n</li>\n<li>\n<p>CircleCI Orbs 入門 — 生産性向上ブログ, <a href=\"https://www.kaizenprogrammer.com/entry/2018/12/01/111145\">https://www.kaizenprogrammer.com/entry/2018/12/01/111145</a></p>\n</li>\n<li>\n<p><a href=\"https://togetter.com/li/1298568\">https://togetter.com/li/1298568</a>, CircleCI Orbs ハッカソン — Togetter</p>\n</li>\n<li>\n<p>名言集.com — 名言・ことわざ・金言・格言集めました, <a href=\"http://www.meigensyu.com/\">http://www.meigensyu.com/</a></p>\n</li>\n</ul>","fields":{"slug":"/20181216-circleci-orbs-ミニハッカソンに行ってきた/"},"frontmatter":{"title":"CircleCI Orbs ミニハッカソンに行ってきた","date":"December 16, 2018","description":"CircleCI Orbs ミニハッカソンに行ってきた"}},"previous":{"fields":{"slug":"/20181206-チャンネルがいっぱい/"},"frontmatter":{"title":"チャンネルがいっぱい"}},"next":{"fields":{"slug":"/20181225-今日誕生日のアイドルを出力するcircleci-orbをつくったお話/"},"frontmatter":{"title":"今日誕生日のアイドルを出力するCircleCI orbをつくったお話"}}},"pageContext":{"id":"62f3d5dd-2abb-5d10-8fe8-bfb4b32b29a6","previousPostId":"d645a4ec-fb2f-585c-a6e6-65ea8ed574d2","nextPostId":"e0035b14-5cfc-5ba0-b43f-b4ab6c819651"}},"staticQueryHashes":["2137539840","2201837728"]}