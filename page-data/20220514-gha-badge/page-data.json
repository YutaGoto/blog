{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/20220514-gha-badge/","result":{"data":{"site":{"siteMetadata":{"title":".ごっちの日記","siteUrl":"https://yutagoto.github.io"}},"markdownRemark":{"id":"e00f23bb-be80-5ad0-a2f6-e5f8cfcc25ce","excerpt":"こんにちは、.ごっちです。 GitHub ActionsのステータスバッジをMarkDown形式で作るのに、ドキュメントを見ながら手動で書き換えるのは大変なので、よしなに生成してくれるコマンドを作りました。 https://docs.github.com/ja/actions/monitoring-and…","html":"<p>こんにちは、.ごっちです。</p>\n<p><a href=\"https://docs.github.com/ja/actions\">GitHub Actions</a>のステータスバッジをMarkDown形式で作るのに、ドキュメントを見ながら手動で書き換えるのは大変なので、よしなに生成してくれるコマンドを作りました。</p>\n<p><a href=\"https://docs.github.com/ja/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge\">https://docs.github.com/ja/actions/monitoring-and-troubleshooting-workflows/adding-a-workflow-status-badge</a></p>\n<h2>作ったもの</h2>\n<p><a href=\"https://github.com/YutaGoto/gha-badge\">https://github.com/YutaGoto/gha-badge</a></p>\n<blockquote class=\"twitter-tweet\"><p lang=\"ja\" dir=\"ltr\">GitHub ActionのMarkdown用のBadge画像を表示してくれるコマンドを作ってた。ﾁｮｯﾄﾍﾞﾝﾘ <a href=\"https://t.co/jD5QSicuqV\">pic.twitter.com/jD5QSicuqV</a></p>&mdash; .ごっち (@gggooottto) <a href=\"https://twitter.com/gggooottto/status/1517882035053887489?ref_src=twsrc%5Etfw\">April 23, 2022</a></blockquote>\n<p><a href=\"https://github.com/YutaGoto/blog/actions\"><img src=\"https://github.com/YutaGoto/blog/actions/workflows/ci.yml/badge.svg\" alt=\"action\"></a></p>\n<div class=\"gatsby-highlight\" data-language=\"md\"><pre class=\"language-md\"><code class=\"language-md\"><span class=\"token url\">[<span class=\"token content\">![action</span>](<span class=\"token url\">https://github.com/YutaGoto/blog/actions/workflows/ci.yml/badge.svg</span>)</span>](https://github.com/YutaGoto/blog/actions)</code></pre></div>\n<p>↑を生成してくれるコマンドです。</p>\n<h3>つかいかた</h3>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">$ gha-badge -n <span class=\"token punctuation\">[</span>GITHUB_USERNAME<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">[</span>--with-link<span class=\"token punctuation\">]</span></code></pre></div>\n<p><code class=\"language-text\">GITHUB_USERNAME</code> を指定するだけで、現在のディレクトリ名をリポジトリ名として Markdownテキストを生成します（この記事を書いているときに気がついたのですが、厳密に実装するなら <code class=\"language-text\">./.git/config</code> にある設定を使えという話ではあります。Organization名でクローンしたときに正しく生成できないので）。\nまた、 <code class=\"language-text\">GITHUB_USERNAME</code> を環境変数にセットしておくと省略できます。</p>\n<p><code class=\"language-text\">--with-link</code> オプションは<code class=\"language-text\">/actions</code>のリンクとして生成するかどうかのフラグになります。</p>\n<h2>実装</h2>\n<h3>環境</h3>\n<ul>\n<li>Rust: 1.60.0-nightly</li>\n<li>anyhow: 1.0</li>\n<li>clap: 3.1</li>\n</ul>\n<p><a href=\"https://crates.io/crates/anyhow\">https://crates.io/crates/anyhow</a></p>\n<p><a href=\"https://crates.io/crates/clap\">https://crates.io/crates/clap</a></p>\n<h2>所感</h2>\n<p>単純にRustを使った何かを作りたかった、というのが目的で選んでいます。実装するにあたり Rust CLIのチュートリアルはとても役に立ちました。充実していてとても素敵です。</p>\n<p><a href=\"https://rust-cli.github.io/book/index.html\">https://rust-cli.github.io/book/index.html</a></p>\n<p>このチュートリアルと <code class=\"language-text\">Clap</code> のドキュメントを少し探しただけで完成できたのでこんなものか～という気持ちです。以前、Splatoon2のステージスケジュールを取得するコマンドをGoで作ったのですが、これと比べるとどちらもいいところあるかなという気持ちです。Goらしさ・Rustらしさがわからないので評価ができないです。</p>\n<ul>\n<li><a href=\"/blog/20190112-splatoon2%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B/\">Splatoon2のステージ情報を取得するコマンドを作っている</a></li>\n<li><a href=\"/blog/20190510-splatoon2%E3%81%AE%E3%82%B9%E3%83%86%E3%83%BC%E3%82%B8%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B-%E7%B6%9A%E3%81%8D/\">Splatoon2のステージ情報を取得するコマンドを作っている 続き</a></li>\n</ul>\n<p>バッジのドキュメントにあるブランチパラメータやイベントパラメータには対応できていないので、追加機能として考えています。</p>","fields":{"slug":"/20220514-gha-badge/"},"frontmatter":{"title":"GitHub ActionsのStatus Badgeをよしなに作るコマンドを作った","date":"May 14, 2022","description":"RustでCLIおためし","tags":["Rust","Cli","GitHub Actions"]}},"previous":{"fields":{"slug":"/20220301-agrienta-plastic-hot-house/"},"frontmatter":{"title":"農家さんの手伝いに行った"}},"next":null},"pageContext":{"id":"e00f23bb-be80-5ad0-a2f6-e5f8cfcc25ce","previousPostId":"7e7e5495-16ef-529b-ace8-af8ef5c83e83","nextPostId":null}},"staticQueryHashes":["1344224355","2137539840","2183174749"]}