{"componentChunkName":"component---src-templates-blog-post-js","path":"/20170516-docker-composeでphp7を動かしてみる/","result":{"data":{"site":{"siteMetadata":{"title":".ごっちの日記"}},"markdownRemark":{"id":"4ed8f1dd-d5d2-5d3f-bc4e-9a83f67385a2","excerpt":"どうも、こんにちは。ごっちです。 最近はもっぱら Docker の勉強をしているところです。今日はシンプルに PHP7 を動かしてみるの会です。 ファイルの準備 必要なファイルを用意します。 Dockerfile docker-compose.yml src/index.php Dockerfile docker…","html":"<p>どうも、こんにちは。ごっちです。</p>\n<p>最近はもっぱら Docker の勉強をしているところです。今日はシンプルに PHP7 を動かしてみるの会です。</p>\n<h2>ファイルの準備</h2>\n<p>必要なファイルを用意します。</p>\n<ul>\n<li>Dockerfile</li>\n<li>docker-compose.yml</li>\n<li>src/index.php</li>\n</ul>\n<h2>Dockerfile</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">FROM php:7-apache\nCOPY src/ /var/www/html/</code></pre></div>\n<h2>docker-compose.yml</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">web:\n  build:\n    .\n  ports:\n    - &quot;9000:80&quot; volumes: - ./src/:/var/www/html:rw</code></pre></div>\n<h2>src/index.php</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;index.php&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hello World!&lt;/h1&gt;\n    &lt;p&gt;\n      &lt;?php\n        echo &quot;I Am Running PHP &quot; . phpversion() . &quot; With Apache And Docker&quot;;\n      ?&gt;\n    &lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre></div>\n<h2>動かしてみる</h2>\n<p>もろもろ準備が整ったので、実際にうごかしてみます。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ docker-compose up\nBuilding web\nStep 1/2 : FROM php:7-apache\n7-apache: Pulling from library/php\n...\nCreating phpdocker_web_1\nAttaching to phpdocker_web_1\nweb_1  | AH00558: apache2: Could not reliably determine the server&#39;s fully qualified domain name, using 172.17.0.2. Set the &#39;ServerName&#39; directive globally to suppress this message\nweb_1  | AH00558: apache2: Could not reliably determine the server&#39;s fully qualified domain name, using 172.17.0.2. Set the &#39;ServerName&#39; directive globally to suppress this message\nweb_1  | [Tue May 16 07:42:26.292180 2017] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.10 (Debian) PHP/7.1.5 configured -- resuming normal operations\nweb_1  | [Tue May 16 07:42:26.292308 2017] [core:notice] [pid 1] AH00094: Command line: &#39;apache2 -D FOREGROUND&#39;\nweb_1  | 172.17.0.1 - - [16/May/2017:07:43:02 +0000] &quot;GET / HTTP/1.1&quot; 200 400 &quot;-&quot; &quot;Mozilla/5.0 (Windows NT 10.0; WOW64; rv:53.0) Gecko/20100101 Firefox/53.0&quot;</code></pre></div>\n<p>こんな感じにログが吐き出されれば動いているかと思います。</p>\n<p>っで、実際に <a href=\"http://localhost:9000\">http://localhost:9000</a> にアクセスしてみると、</p>\n<p><img src=\"https://cdn-images-1.medium.com/max/3600/0*2KNorsm5cDyq345w.PNG\"></p>\n<p>と表示されるはずです。 docker-compose up をとめるときは Cntl + c でとめれます。</p>\n<h2>References</h2>\n<ul>\n<li>PHP 7 With Docker And Docker Compose, <a href=\"https://jasonmichels.com/2015/09/30/php-7-with-docker-and-docker-compose/\">https://jasonmichels.com/2015/09/30/php-7-with-docker-and-docker-compose/</a></li>\n<li>asonmichels/php7-docker-tutorial, <a href=\"https://github.com/jasonmichels/php7-docker-tutorial\">https://github.com/jasonmichels/php7-docker-tutorial</a></li>\n<li>YutaGoto/php<em>docker, [<a href=\"https://github.com/YutaGoto/php\">https://github.com/YutaGoto/php</a></em>docker](<a href=\"https://github.com/YutaGoto/php_docker\">https://github.com/YutaGoto/php_docker</a>)</li>\n<li>Gist, <a href=\"https://gist.github.com/YutaGoto/32b8e5d9fee348896089a3a83420bc10\">https://gist.github.com/YutaGoto/32b8e5d9fee348896089a3a83420bc10</a></li>\n</ul>\n<p><em>Originally published at <a href=\"https://gist.github.com/YutaGoto/32b8e5d9fee348896089a3a83420bc10\">gist.github.com</a>.</em></p>","frontmatter":{"title":"Docker ComposeでPHP7を動かしてみる","date":"May 16, 2017","description":"Docker ComposeでPHP7を動かしてみる"}},"previous":{"fields":{"slug":"/20170512-dockerでrailsプロジェクトを作ってみた/"},"frontmatter":{"title":"DockerでRailsプロジェクトを作ってみた"}},"next":{"fields":{"slug":"/20170519-docker-compose-で-django-プロジェクトを作ってみる/"},"frontmatter":{"title":"Docker Compose で Django プロジェクトを作ってみる"}}},"pageContext":{"id":"4ed8f1dd-d5d2-5d3f-bc4e-9a83f67385a2","previousPostId":"1f499595-27b0-5571-91ec-25f0518f6dca","nextPostId":"39bbe626-c561-5926-b685-10dd422a6572"}},"staticQueryHashes":["2137539840","2201837728"]}