{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/20210627-minecraft-server-admin/",
    "result": {"data":{"site":{"siteMetadata":{"title":".ごっちの日記","siteUrl":"https://yutagoto.github.io"}},"markdownRemark":{"id":"1a46de5d-e8a4-5c08-ab29-baf8e090408a","excerpt":"こんにちは、.ごっちです。 ちょっと前(2021 年 4 月くらい)から友人にお願いされてMinecraft(Java Edition)のサーバーの面倒をみることになりました。\nもともとはConoHa VPS の Minecraft…","html":"<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.9873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAABT0lEQVQY0wFEAbv+AIuEg+thXFuhjYaF5nZwb/eOiIb2iIKAyoJ9e++OiIb1XVlX746Hhe1bV1b/ZmJg4ZyVk/mFfnzshH99+Xp0c/ORioj0cWxr901JSPePiYf/AJ2WlP+ak5H/mpOQ/5OMivyQiof8mJKP/5GLif+el5T/SkZF8pqTkfE1MjGhaWVjuaignv+PiYf/iYOA/JCJh/2knJn9dnFv/xAPD+p1cG7/ACwqK/9JRkbqWlVV/2BcXP9MSEj/REFB+lpWVv94c3L/WVVV9mdiYvV8d3bkY19f3WVhYf9qZWX/WVRU/2FdXf9bVlb/Uk5OmAAAAFQ7Nzj/AA4MD2UAAAApDAsPZgwLDm8XFRhwAAAAR1dVVdtyb2//Xlxc8VtZWPdoZmX/VFJS+HBtbf9MSkrdBQQIZg8NEWcODA9rKSczByAeHQsPDhFqwfibON5FgzoAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Minecraft Java\" title=\"Minecraft Java\" src=\"/blog/static/314e1c9012bd9ca19a7d6091b31487b4/f058b/minecraft.png\" srcset=\"/blog/static/314e1c9012bd9ca19a7d6091b31487b4/c26ae/minecraft.png 158w,\n/blog/static/314e1c9012bd9ca19a7d6091b31487b4/6bdcf/minecraft.png 315w,\n/blog/static/314e1c9012bd9ca19a7d6091b31487b4/f058b/minecraft.png 630w,\n/blog/static/314e1c9012bd9ca19a7d6091b31487b4/40601/minecraft.png 945w,\n/blog/static/314e1c9012bd9ca19a7d6091b31487b4/121b3/minecraft.png 1070w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>こんにちは、.ごっちです。</p>\n<p>ちょっと前(2021 年 4 月くらい)から友人にお願いされて<a href=\"https://www.minecraft.net/ja-jp\">Minecraft</a>(Java Edition)のサーバーの面倒をみることになりました。\nもともとは<a href=\"https://www.conoha.jp/vps/function/minecraft/\">ConoHa VPS の Minecraft プラン</a>を使っていたとのことでしたが、もろもろ事情があって作れないか？とのことでした。\n同じく ConoHa VPS サーバーを使ってもよかったんですが、クラウドの勉強も兼ねて<a href=\"https://cloud.google.com/\">GCP</a>上で環境を整えることにしました。</p>\n<h2>GCE たてる</h2>\n<p>さくっと作りたかったので<a href=\"https://cloud.google.com/compute\">Google Compute Engine</a>上に Ubuntu(18.04)をいれてサーバーを立てました。スペックは以下の通り</p>\n<ul>\n<li>マシンタイプ: e2-standard-2（vCPU x 2、メモリ 8 GB）\n<ul>\n<li><del>e2-small(vCPU x 2, メモリ 2GB)</del> で最初作って動かしたところ、マインクラフトが途中でクラッシュしてしまいました..</li>\n</ul>\n</li>\n<li>ゾーン: asia-northeast1-b\n<ul>\n<li>いわゆる東京リージョン</li>\n</ul>\n</li>\n<li>ブートディスク: 10GB</li>\n</ul>\n<p>複数人で同時に遊ぶ前提もあるので、そこそこなマシンタイプになっています。たぶん 20 人くらいまで同時にプレイしても問題ないはずです。まだそういう状況になっていないので本当に耐えられるのかは未検証ですが、6－7 人同時接続プレイはほぼ問題なく動作しました。</p>\n<h3>サーバーの細かな設定</h3>\n<p>http, https 通信は不要なのでファイアウォールの設定から塞いでおきます。Minecraft につなげるために 25565 番ポートを開けておきます。VPC ネットワークのファイアウォールルールでルールを作って、そのタグを付与させます。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 430px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 182.91139240506325%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAIAAADNzV5SAAAACXBIWXMAAAsTAAALEwEAmpwYAAADMUlEQVRIx5WU3YocRRTH+0WMi2CCMS5eBELEi91HEO+98AkiJIpXISASyAMEvBNhJZsQQfBGo5vEZNawagI73QRmRFy7Zrq3q6q7qrq6vqtkpjazxCTz8aeoqYb59alzzr9PcvLC/qkL+6c+6b9zsb9+qf/2xck6c6n/7qf765+lpz/uvfnBjyc/vPNs/TRdR4/JW5ebM1fIG5+j967ijWv1+hV87sv6/NX67Bf1+Wv09Ef7r71/Z23z7omNndc3dtY2765t3ouPJzZ2kq9+eHr9+/T2b9X2w8ObverGg/G3v462e+U3vxxs3QO39tDN3/GNR9WtP/D2HtzaLb++n2/tlt89IbcfN8mfe7u9+z+HEFhnpfbBKd6UnEJOIcOFZIg3FT7MJYWkAuW/f6WPH+V/D0II3vuEsLYhTGlrrLc+WBe8D9ZPdheCts5Yb1yY7JPDZNfGxZVQSjHGIQRjDOdcKcU576bSWoe5msB1XYcQCKVZlg2HwyzL0jTNsqwsy3i9V8JCiLZtQwjOOWNMWEWJ1lpKOYlMyHA4jK/wUy2GCWkgrEIIQojRaFQUxcHBQZ7nCKHFcNspyoXzwVorhEAIWWuXjTwAuv+P0nYSGcGq9/BB13XL5kw727TW+cDarqiINIFLx4XrlKuZFcrNgxklpGlCCFJ7SB0kFlILicXU5JVumJ0HG2OiGYzWxigpOiU7s8geR7CUMibJeTsajeu6llJqbab2CPOLliilYp+11hDCeF66YM/syTkHABBC5lvy5Q6jlKZpyhhbARZCcM6jtznnS2JHMOecUhrtWVXVanDbtjHPruvG47FzLl57GYcm8cd7b6da7ZOcwd77w6nqugYAYIwRQoyxecNgVlvGGABATiWEMMYopeaPh+PIM5++qFfln8xOSqm2bTHGy5vsGBZCUEohhJTSOBKcc957zjlCCGP8YvDnrh0nrhAi1in+W0pJKW3bdh4cVtcxHOcm51xKGYfxajkXU8XvbGay2IWXNuK4z5zzwWAAAJj1JhaMUlpV1YKCzRxqrVVKRZMve22lVFmWCCEIYVEUhJCF/HM5AwDyPF/ZJP/LZ8lJ8h/cmTQ97gJYXAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Firewall role\" title=\"Firewall role\" src=\"/blog/static/f7b28cf80dd46eeb7617b38058b9d4e7/05ed2/firewall.png\" srcset=\"/blog/static/f7b28cf80dd46eeb7617b38058b9d4e7/c26ae/firewall.png 158w,\n/blog/static/f7b28cf80dd46eeb7617b38058b9d4e7/6bdcf/firewall.png 315w,\n/blog/static/f7b28cf80dd46eeb7617b38058b9d4e7/05ed2/firewall.png 430w\" sizes=\"(max-width: 430px) 100vw, 430px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<h2>環境構築</h2>\n<p>公式 Wiki にあるチュートリアルの通りに進めました。かなり親切だと思います。</p>\n<p><a href=\"https://minecraft.fandom.com/ja/wiki/%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97\">https://minecraft.fandom.com/ja/wiki/%E3%83%81%E3%83%A5%E3%83%BC%E3%83%88%E3%83%AA%E3%82%A2%E3%83%AB/%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97</a></p>\n<h2>ワールドの引っ越し</h2>\n<p>もともと運用されていた ConoHa 上にあるワールドデータを GCE 上に移動させます。</p>\n<p>ConoHa にあるワールドデータを<code class=\"language-text\">tar.gz</code>に固めて自身の端末にダウンロードします。そのファイルを GoogleCloudStorage で作ったバケットにアップロードします。</p>\n<p>GoogleCloudStorage のバケットにアップロードしたファイルを GCE にダウンロードして展開します。初回起動時に自動生成されたワールドデータは削除しておきます。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">minecraft $ rm -rf world # 現ワールドを消す\nminecraft $ gsutil cp gs://バケット名/ファイル名.tar.gz . # GCEからGCSに繋げられるようにサービスアカウントの設定をしておく\nminecraft $ tar -zxvf ファイル名.tar.gz\nminecraft $ cp 展開したworldディレクトリ名 world</code></pre></div>\n<p>展開までできたら起動して動作確認をします。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">minecraft $ java -Xmx1024M -Xms1024M -jar server.jar nogui</code></pre></div>\n<p>実際に繋げて確認します。データの損失がないこと確認して、データの保存がしっかりと行われていれば完了です！</p>\n<h2>追加機能</h2>\n<p>せっかく自由に管理できる状態なので、より安心して遊びやすくしていきます。</p>\n<h3>ワールドデータのバックアップ</h3>\n<p>不慮の事故でデータやサーバが損失したとしても もとに戻せるようにバックアップをサーバ起動時にとっておきます。起動と同時(<code class=\"language-text\">crontab</code> で設定します)にディレクトリを圧縮して GCS にアップロードするスクリプトを実行しているだけです。</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">#!/bin/bash\ncd ~/minecraft\ntar czf world.tar.gz world\ngsutil cp -R ~/minecraft/world.tar.gz gs://バケット名/$(date &quot;+%Y%m%d%H%M%S&quot;)-world.tar.gz\nrm world.tar.gz\ncd ~</code></pre></div>\n<p>バックアップデータも永遠に保持する必要もないので(保持していたらその期間分お金が発生してしまいますし)、GCS のライフサイクルの設定で 5 日間経過したら削除するようにしました。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 86.0759493670886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVQ4y41Su24UMRTd36AiooKKoAgKOvp8CQ0/ACJEIgVfwAcgOkBQIBJAoggvISGRNCTZZWZ2d8brx3ge14/xeGyj3YFkF4TE0ZUs2/f43nN8B5fusIu3ycb2bH0Lr98jG9vk2k5+4dZ4bfP92ub+aZzf3D93M756n1zfwTcekCtb+PJdPHj4/Nvjd8nugXjxhT79kD77iB69OXmyn+1+Zq8+0eV4+bXaO4TXh/D2EPYOYPcABmgSQVWEEIL3IXQhuK4B79rwHxgk1Fc6cM6Ph6MoipPxJBlPjk+GQsgQgvPe+eCc7zHfurMYlLVsbaeUopQWRQEAhJCiKOq6DiG0bdt11rmgjdPGdc6vVAaobdsuuv510XVdT/Ped13nnFMm1CpU0isTeoE9BtZa7z0AUEoZYxjPEEJZljHGZgtkWTbDGBOCMc4ylOd5//q8cr/keT4aDo9PfsRTSuk8j3POGKOU4iUQgimlTdOskLXWnPOcFykiWivOOaVUSlmWpRDin273S9u2CKGi4HVdAQBCaDqdYozTNEUIWWtPTXEL61fIzrmiKEajH2maRlE0mUwQQlEUpWkaxzFCCGMcx3GSJISQtm3PyL11lNLxeJzMEafpdDIZHx19T9OpEAIAOOeEEMaYUmql7Z4MAL0TnQtSW6WNaTuh7OrX/qW5/8+6roUQzjmpbQFGN1Y1bQnzMXGus9Z2v/GnZmNMP15VVUkp6roqy5JRljMmpQQArXVVzQ8BwBizUjmEYBfQWltrhZBN0zSmAQAppdbae6+UklIaY1aGpNe8LEYppRdomqau675Un7Oc+RMWAK4vCJANugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Lifecycle\" title=\"Lifecycle\" src=\"/blog/static/b94a733d4909b8bfac415226dcea21a2/f058b/lifecycle.png\" srcset=\"/blog/static/b94a733d4909b8bfac415226dcea21a2/c26ae/lifecycle.png 158w,\n/blog/static/b94a733d4909b8bfac415226dcea21a2/6bdcf/lifecycle.png 315w,\n/blog/static/b94a733d4909b8bfac415226dcea21a2/f058b/lifecycle.png 630w,\n/blog/static/b94a733d4909b8bfac415226dcea21a2/c5bb3/lifecycle.png 680w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<h3>Discord から起動・停止できるように</h3>\n<p>24 時間起動させておく必要はないので、遊びたくなったら起動・終わったら停止が Discord からできるようにつくります。サーバが起動したら Minecraft も自動で起動するようにしておきます。(<code class=\"language-text\">crontab</code> で設定します)</p>\n<p>Python のスクリプトをサクッと書きました。</p>\n<p><a href=\"https://qiita.com/thinceller/items/6bc7d28a04a8da75e818\">Qiita</a>の記事が大変参考になりました。</p>\n<p>いまは heroku 上に 24 時間 Free Dynos でぶいぶい起動させていますが、ゆくゆくは<a href=\"https://blog.discord.com/slash-commands-are-here-8db0a385d9e6\">スラッシュコマンド</a>で実装し直したいと考えています。Heroku を脱却してできれば CloudRun とかにのせたいと企んでいます。</p>\n<p>使い勝手は以下の画像のようになっています。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpklEQVQoz33QzWoTURTA8XkItavENFOrY5Q2M+fee+6ZO993JplE2zEVai3artoqCq5EERRcCX7sfQxBhEljRRGfxq0KXWmmLiYtCr/l+XMOx7ggXs3B9zNwOOf8Om3//Lcfp+zDjniMxDnFnEJOoWHJt/lgpJJtim52RWHjaqXo4vWTQKZM+kwGRwzXC3ScI/qkNHOHXVyxZeHggEu3hipuvZzG3B1A8GzUv72x+SQtXp6DF4v8TYc/cjAEGQNGgDFIPYURk+FMLEhlPcyH0eatYm1N9/pCp06iuc48nflphuDtLcBrC5/rLBZEUOsNRxbz7P08K00cm2LfxImJk7YYm6KcwrLFPzXgawO+tMXBEu5wiUxGf+O2eGepD4vq2wJ9bsKkCR8rkybsHzkL4xYrW6xswMFlsTsTL8utKLmkQuF6DseOpIuSLKQlQY4g+5jqZ7WzUaVdeS/1rmX9HdIPzrOHFn+6jOtcekzG1ZK62Ydxyny9W1y9sb5x58rovqP2bHUXaJVJdWz0JINT4EdRlOa94UqWD8IkTjJNXggY/L/8E/8GJmWyatIw0BUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Discord\" title=\"Discord\" src=\"/blog/static/cc7f29eb214df8567c0a833e78c106ba/f058b/discord.png\" srcset=\"/blog/static/cc7f29eb214df8567c0a833e78c106ba/c26ae/discord.png 158w,\n/blog/static/cc7f29eb214df8567c0a833e78c106ba/6bdcf/discord.png 315w,\n/blog/static/cc7f29eb214df8567c0a833e78c106ba/f058b/discord.png 630w,\n/blog/static/cc7f29eb214df8567c0a833e78c106ba/40601/discord.png 945w,\n/blog/static/cc7f29eb214df8567c0a833e78c106ba/78612/discord.png 1260w,\n/blog/static/cc7f29eb214df8567c0a833e78c106ba/0f882/discord.png 1584w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>停止しわすれたときのために自動でシャットダウンする機能もつくりたいとも考えてますが、いい感じの実装が思いついていないです。</p>\n<h3>料金通知</h3>\n<p>長時間起動していなければそこまで大きな課金額にならないと踏んでいますが、莫大な請求金額になる前に気づきたいので、毎日その時点での月の請求金額を通知する仕組みも用意しています。</p>\n<p>予算設定もあるので、課金額が予算額に達したらスマホ通知やメール通知が飛ぶように設定します。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.87341772151899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA00lEQVQY053QMVYEIQyA4bl/5Rm8h7WVtf2yIzxgnMyGAGHDxufg2I2FXxXS/HlMzjkiSin1LnxXzL01YebHoZ+bVNV7b4yZ59mYy/VqxjOE4Jyz1uq5iZkBYF1XRBwDEQFAzhkRieivcmuNiD6s9yEi4rZto7ks8RMS5ULnJuZGlHpPIpko55xF5H6QQ9+3P/NORKZaaLbx6RleXm94W4jyuJyZSykxRu89AMzB++BLKaWWtKu1ToDMLG/verFdVVR1NMdX/6b4KIpI3X2XuYn+1xeRys7alXUn2wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Yosan\" title=\"Yosan\" src=\"/blog/static/02bc3a3edf17833326a491416be2ae0a/f058b/yosan.png\" srcset=\"/blog/static/02bc3a3edf17833326a491416be2ae0a/c26ae/yosan.png 158w,\n/blog/static/02bc3a3edf17833326a491416be2ae0a/6bdcf/yosan.png 315w,\n/blog/static/02bc3a3edf17833326a491416be2ae0a/f058b/yosan.png 630w,\n/blog/static/02bc3a3edf17833326a491416be2ae0a/40601/yosan.png 945w,\n/blog/static/02bc3a3edf17833326a491416be2ae0a/6d74e/yosan.png 1085w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>課金データは BigQuery に出力できるのでやっておきます。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 91.13924050632912%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACO0lEQVQ4y5VSy2oUQRSd78jCP8hOIygEnOg+v2LArYIB/YgI/oJ7F0IQsnCSyWQCLoJmTLq7uqd7uqdet6pv1a2SmYlxRpOgh8OFWhzOPedWZ/3VeP1l/vhtcf91sbGbP3pTbOwW915kazvJ2vNkNnfS29h5/+HgY+/i82mxf8IOvpb7J/mnY7Z/Ou591/2ROTqHw3N9GztqWnm0Upq60VwYAyZSi0YFaiNhDD7ejk6M0SKx2qVlm1ZYq+BCsIhgrDbGtK0j8iFQiJ4CevIUrtkRQiDipCpHF1mSpGmajLMqu8jzbDyt+OUoKbKyGU9ZxkY/RozlIYTfzgDgnCMKAiJYr6TUjTUcnfFWolWuBWd5K4XSWjvnVtYGAEQHADnL8pxxzuM/o6OU8t5fVlmaMztHoFnEZRDRYhLRithaS+S54FJKDVpp7f2s4RCD9+S9R0QpZYwRACaTennzq8wAYIxBxBCjUooxVhRFvgTG2EK2UpiU0qFTSrIsS5LLGOO7vb2HGw+ePd3qdp9sbXW73e7m5ub29nZd1zHGRYQFOlqDQ/QUFDhjkUL8dp5+6fX7x8PD/knvaDAcDgeDwdnZ2bLnlXM6cQKoRV9MDFctl7bizlF0FFsXob2zbalMi35SldaaX5Fm1cYFI13jBrExQERVVdV180cf887vdJ6fipqmKcuiLMtxWTZNMzubUpzz6XQqhAANcv6UUhpjV8XeA5iiEkIaY2D+5/Dvem5wds4FIou+bFqhMP4PfgJjkeN815IQNQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Kakin Export\" title=\"Kakin Export\" src=\"/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/f058b/kakin.png\" srcset=\"/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/c26ae/kakin.png 158w,\n/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/6bdcf/kakin.png 315w,\n/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/f058b/kakin.png 630w,\n/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/40601/kakin.png 945w,\n/blog/static/79e7084c18f5919bcb3a482e4b85ea6e/84ee5/kakin.png 1076w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>あとは定期的に BigQuery を叩いて、(普段 仕事でも使う)Slack に通知が飛ぶように仕向けます。</p>\n<p>実行自体は CloudFunction で定期的な実行フラグは Scheduler で間をつなぐのは Pub/Sub でやっています。</p>\n<p>いまのところその予算を超えるような使い方をしていないのでかなり平和で安く運用できています。</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; margin: 0\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 34.177215189873415%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABYlAAAWJQFJUiTwAAABN0lEQVQY03WQS07DMBiEc5I2bZMmbus4jh+/7d+PxE2rSlyAA7Bm1yU7boBYcAEuwsVQ6QIJCelbzGZmNFM8Pl2fX94HbfLpEtKR9rLjalCWUF4Tuqza8n+K6+vH2+cX48N8eQBM2kUbRj/OynomNGDULlifMGbrR8qVNKhd1DZU7aGoW7Jtmj0TYZq5stJ4GyYXpl6ABAzjjCmHaY7TKeazBNQ2+PFofaoJLcqKLDbNgQmMuZdGAIKLgGnQjitjfBKA0uChl5SrXgKhfM9EN+hmz4pVTZab5tDLlM+DdsoGwGjDJOFmCOPMBAjAxXpbVu1i09zXLn/EzVxWLeUq5fOt1idMWdkQ80mAAxeV8VwaQvmqJuvt7peaFPcYQnvtQseVskEC7rpBGmQCOq5rQsuqvXf8efsbhDNVQPkp0LAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Slack\" title=\"Slack\" src=\"/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/f058b/slack.png\" srcset=\"/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/c26ae/slack.png 158w,\n/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/6bdcf/slack.png 315w,\n/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/f058b/slack.png 630w,\n/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/40601/slack.png 945w,\n/blog/static/04bb41137aa7092dfd5a0ca1b8b16a9d/84ee5/slack.png 1076w\" sizes=\"(max-width: 630px) 100vw, 630px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\n<p>小数が適切に処理されていないのは見逃してほしいです。。</p>\n<h2>今後</h2>\n<p><a href=\"https://cloud.google.com/game-servers\">Game Servers</a>という Kubernetes 上でもろもろ管理・スケールできるものもあるんですが、ソシャゲでスペック調整いるとか 24 時間管理するものとかでもないのでいったん見送っています。</p>\n<p>すぐに環境を用意できて削除することもできることが分かったので、突発企画で建築コンペやダイヤ発掘レース・マルチでエンダードラゴン討伐 TA などもできそうだなーとか思っています。要望があれば作ります。</p>\n<p>前述した実装しきれていない部分もあるので時間を見つけて着手していきます。</p>\n<p>こんな感じのことをやっていると、Minecraft そのものをプレイする時間がなくなってきます(´・ω・｀)</p>\n<blockquote class=\"twitter-tweet\"><p lang=\"ja\" dir=\"ltr\">いじいじ <a href=\"https://t.co/NrUuYzdn4O\">pic.twitter.com/NrUuYzdn4O</a></p>&mdash; .ごっち (@gggooottto) <a href=\"https://twitter.com/gggooottto/status/1383101215953752065?ref_src=twsrc%5Etfw\">April 16, 2021</a></blockquote>","fields":{"slug":"/20210627-minecraft-server-admin/"},"frontmatter":{"title":"GCPでMinecraft マルチサーバー管理している","date":"June 27, 2021","description":"Minecraft サーバー管理始めました"}},"previous":{"fields":{"slug":"/20210511-esa7th-tonokoto/"},"frontmatter":{"title":"esa7th Anniversary とのこと"}},"next":{"fields":{"slug":"/20211009-ringfitadv-round3/"},"frontmatter":{"title":"リングフィットアドベンチャー 3周目完走したので感想"}}},"pageContext":{"id":"1a46de5d-e8a4-5c08-ab29-baf8e090408a","previousPostId":"4b513020-273f-5f89-95a4-8e349c36d6ef","nextPostId":"2eb15faa-f760-5b59-bc98-8223414c2d3d"}},
    "staticQueryHashes": ["2137539840","2201837728"]}